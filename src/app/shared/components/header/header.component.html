<header class="header">
  <div class="header__container">
    <!-- Logo / Brand -->
    <div class="header__brand">
      <a routerLink="/" class="brand" aria-label="Todo App Home">
        <svg class="brand__icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
          <rect x="3" y="3" width="8" height="8" stroke="currentColor" stroke-width="2" rx="1" />
          <rect x="13" y="3" width="8" height="8" stroke="currentColor" stroke-width="2" rx="1" />
          <rect x="3" y="13" width="8" height="8" stroke="currentColor" stroke-width="2" rx="1" />
          <rect x="13" y="13" width="8" height="8" stroke="currentColor" stroke-width="2" rx="1" />
        </svg>
        <span class="brand__text">Todo Pro</span>
      </a>
    </div>

    <!-- Search Bar (Desktop) -->
    <div class="header__search">
      <div class="search-box">
        <svg class="search-box__icon" width="18" height="18" viewBox="0 0 24 24" fill="none">
          <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2" />
          <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
        </svg>
        <input
          type="text"
          class="search-box__input"
          placeholder="Search todos..."
          [(ngModel)]="searchQuery"
          (keyup.enter)="handleSearch()"
          aria-label="Search todos"
        />
        <button
          *ngIf="searchQuery"
          class="search-box__clear"
          (click)="clearSearch()"
          aria-label="Clear search"
          type="button"
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
          </svg>
        </button>
      </div>
    </div>

    <!-- Right Section: Navigation & Auth -->
    <div class="header__right">
      <!-- Navigation -->
      <nav class="header__nav" [class.header__nav--open]="mobileMenuOpen" role="navigation">
        <ul class="nav-list">
          <li>
            <a
              routerLink="/"
              routerLinkActive="nav-link--active"
              [routerLinkActiveOptions]="{ exact: true }"
              class="nav-link"
              (click)="closeMobileMenu()"
            >
              Home
            </a>
          </li>
          <li>
            <a
              routerLink="/about"
              routerLinkActive="nav-link--active"
              class="nav-link"
              (click)="closeMobileMenu()"
            >
              About
            </a>
          </li>
          <li>
            <a
              routerLink="/settings"
              routerLinkActive="nav-link--active"
              class="nav-link"
              (click)="closeMobileMenu()"
            >
              Settings
            </a>
          </li>
        </ul>

        <!-- Auth Buttons -->
        <div class="header__auth">
          <button
            *ngIf="!(isAuthenticated$ | async)"
            class="btn btn-secondary"
            (click)="onLogin(); closeMobileMenu()"
            aria-label="Login"
          >
            Login
          </button>
          <button
            *ngIf="isAuthenticated$ | async"
            class="btn btn-danger"
            (click)="onLogout()"
            aria-label="Logout"
          >
            Logout
          </button>
        </div>
      </nav>

      <!-- Dark Mode Toggle -->
      <button
        class="header__theme-toggle"
        (click)="toggleDarkMode()"
        [attr.aria-pressed]="isDarkMode"
        aria-label="Toggle dark mode"
        type="button"
      >
        <svg *ngIf="!isDarkMode" class="theme-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
          <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2" />
          <path d="M12 1V3M12 21V23M23 12H21M3 12H1" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
          <path d="M20.485 3.515L19.071 4.929M4.929 19.071L3.515 20.485M20.485 20.485L19.071 19.071M4.929 4.929L3.515 3.515" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
        </svg>
        <svg *ngIf="isDarkMode" class="theme-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </button>

      <!-- Mobile Menu Toggle -->
      <button
        class="header__mobile-toggle"
        (click)="toggleMobileMenu()"
        [attr.aria-expanded]="mobileMenuOpen"
        aria-label="Toggle navigation menu"
        type="button"
      >
        <span class="hamburger__line"></span>
        <span class="hamburger__line"></span>
        <span class="hamburger__line"></span>
      </button>
    </div>
  </div>
</header>
